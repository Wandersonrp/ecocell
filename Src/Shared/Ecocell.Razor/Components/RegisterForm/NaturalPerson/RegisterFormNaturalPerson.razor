@using System.ComponentModel.DataAnnotations

<div class="form">
    <MudForm Class="ma-0 pa-0" Model="_model" @ref="_form" @bind-Errors="@errors" Validation="@(_validator.ValidateValue)" Style="width: 100%; gap: 1.25rem;" ValidationDelay="0">
        <MudTextField 
            Class="ma-0 pa-0"
            T="string" 
            @bind-Value="_model.Name"
            For="@(() => _model.Name)"
            Immediate="true"
            Required="true" 
            RequiredError="Nome é obrigatório!" 
            Placeholder="Nome" 
            Variant="Variant.Outlined"
        />
        <MudTextField 
            Class="ma-0 pa-0"
            T="string"
            @bind-Value="_model.Email"
            For="@(() => _model.Email)"
            Immediate="true"
            Required="true" 
            Placeholder="E-mail"
            Variant="Variant.Outlined"                   
        />
        <MudTextField 
            Class="ma-0 pa-0"
            T="string"
            @bind-Value="_document.Text"            
            Required="true"
            Immediate="true"
            RequiredError="CPF é obrigatório!"
            Placeholder="CPF"
            Mask="@_cpfMask"
            Variant="Variant.Outlined" 
        />
        <MudTextField 
            Class="ma-0 pa-0"
            T="string"
            @bind-Value="_model.Password"
            For="@(() => _model.Password)"
            Immediate="true"
            InputType="InputType.Password"            
            Placeholder="Senha" 
            Variant="Variant.Outlined"            
        />
        <MudTextField 
            Class="ma-0 pa-0"
            T="string"
            @bind-Value="_model.PasswordConfirmation"
            For="@(() => _model.PasswordConfirmation)"
            Immediate="true"
            InputType="InputType.Password"
            Placeholder="Confirmar senha"            
            Variant="Variant.Outlined"             
        />
        <div class="d-flex align-center gap-"> 
            <MudButton 
                Variant="Variant.Filled" 
                Color="Color.Primary"
                Class="pa-3"
                FullWidth
                Disabled="@_isLoading"
                OnClick="@(async () => await Submit())"
            >
                @if(_isLoading)
                {
                    <MudProgressCircular Color="Color.Default" Size="Size.Small" Indeterminate="true" />
                }
                else
                {
                    <span>Cadastrar</span>
                }
            </MudButton>
        </div>
    </MudForm>
</div>
